define(function (require) {

    var $ = require('jquery'),
        // royalSlider = require('jquery.royalslider'),
        magnificPopup = require('jquery.magnificPopup'),
        // splippy = require('slippry'),
        sliderpro = require('sliderpro'),
		//cookie = require('cookie'),
        lib = require('./lib.min');

    //if (location.hostname === "beta.bestwaycorp.com" && location.search.indexOf("lg=en") === -1) {
    //	if ($.cookie("RememberUrl") === undefined || $.cookie("RememberUrl") === null) {
    //		window.location.href = languageToUrl();
    //	} else {
    //		if ($.cookie("RememberUrl").indexOf("http://") === 0) {
    //			window.location.href = $.cookie("RememberUrl");
    //		}
    //		else {
    //			window.location.href = languageToUrl();
    //		}
    //	}
    //}

    $(function () {

        lib.proloadImage(function () {

            $("#home-slider").sliderPro({
                width: '100%',
                //height: '679',
                imageScaleMode: 'cover',
                autoHeight: true,
                arrows: true,
                buttons: false,
                fadeArrows: false,
                //autoplay: false,
                autoplayDelay: 10000,
                sliderResize: function () {
                }
            });

            $(".slider__title").each(function () {
                if ($(this).text() == "") {
                    $(this).css({ "background": "none" });
                };
            });
            $(".Series:last .Series__body:last").css({
                "margin-bottom": 0
            });

            $(".support__video--open").magnificPopup({
                type: 'iframe',
                iframe: {
                    patterns: {
                        youtube: {
                            index: 'youtube.com/',
                            id: 'v=',
                            src: '//www.youtube.com/embed/%id%?autoplay=1'
                        }
                    }
                }
            });

            //$('#main-slider').slippry({
            //    // general elements & wrapper
            //    slippryWrapper: '<div class="sy-box sy-pagenav" />', // wrapper to wrap everything, including pager
            //    // options
            //    adaptiveHeight: true, // height of the sliders adapts to current slide
            //    useCSS: false, // true, false -> fallback to js if no browser support
            //    autoHover: true,
            //    transition: 'horizontal'
            //});

            $(".scrollDown").click(function (e) {
                $("html, body").animate({
                    scrollTop: $(document).height() - $(window).height()
                }, 600);
                return false;
            });

            $(".scrollTop").click(function (e) {
                $("html, body").animate({
                    scrollTop: 0
                }, 600);
                return false;
            });

            $(window).resize(function () {

                $(".news").css({
                    "height": $(".news__image img").height() + "px"
                });

                //$(".news__background:after").css({
                //    "height" : "100px"
                //});

                if ($(window).width() <= 760) {
                    $(".news__image").addClass('xs--news__image').removeClass('news__image');
                } else {
                    $(".xs--news__image").addClass('news__image').removeClass('xs--news__image');
                }

                if ($(window).width() >= 320 && $(window).width() <= 667) {
                    $(".news").addClass('xs--news').removeClass('news').appendTo(".news__background .container:eq(0)");
                    //$(".news__head").addClass('xs--news__head').removeClass('news__head');
                    //$(".news__wrapper").addClass('xs--news__wrapper').removeClass('news__wrapper');
                    //$(".news__date").addClass('xs--news__date').removeClass('news__date');
                    //$(".news__body").addClass('xs--news__body').removeClass('news__body');
                    //$(".news__title").addClass('xs--news__title').removeClass('news__title');
                    //$(".news__overview").addClass('xs--news__overview').removeClass('news__overview');
                    //$(".news__buttom").addClass('xs--news__buttom').removeClass('news__buttom');
                    //$(".news__tag").addClass('xs--news__tag').removeClass('news__tag');
                } else {
                    $(".xs--news").addClass('news').removeClass('xs--news').prependTo(".news__background .container:eq(0)");
                    //$(".news__head").addClass('news__head').removeClass('xs--news__head');
                    //$(".news__wrapper").addClass('news__wrapper').removeClass('xs--news__wrapper');
                    //$(".news__date").addClass('news__date').removeClass('xs--news__date');
                    //$(".news__body").addClass('news__body').removeClass('xs--news__body');
                    //$(".news__title").addClass('news__title').removeClass('news__title');
                    //$(".news__overview").addClass('news__overview').removeClass('xs--news__overview');
                    //$(".news__buttom").addClass('news__buttom').removeClass('xs--news__buttom');
                    //$(".news__tag").addClass('news__tag').removeClass('xs--news__tag');
                }
            });
            $(window).resize();
        });
    });


    function languageToUrl() {
        //var lang = (navigator.language || navigator.systemLanguage || navigator.userLanguage || "en").toLowerCase();
        var lang = (navigator.browserLanguage || navigator.systemLanguage || navigator.userLanguage || "en").toLowerCase();
        switch (lang) {
            case "de-at":
            case "bg-bg":
            case "es-cl":
            case "cs-cz":
            case "de-de":
            case "da-dk":
            case "es-es":
            case "fi-fi":
            case "fr-fr":
            case "el-gr":
            case "zh-hk":
            case "hu-hu":
            case "is-is":
            case "it-it":
            case "ro-md":
            case "es-mx":
            case "nl-nl":
            case "no-no":
            case "es-pe":
            case "pl-pl":
            case "pt-pt":
            case "ro-ro":
            case "ru-ru":
            case "sv-se":
            case "sk-sk":
            case "zh-cn":
            case "en-us":
                return "http://www.bestwaycorp." + lang.split("-")[1];
            case "es-ar":
            case "en-au":
            case "pt-br":
            case "es-co":
            case "en-cy":
            case "mt-mt":
            case "tr-tr":
                return "http://www.bestwaycorp.com." + lang.split("-")[1];
            case "en-ca":
            case "fr-ca":
            case "nl-be":
            case "fr-be":
            case "de-ch":
            case "it-ch":
            case "fr-ch":
                return "http://www.bestwaycorp." + lang.split("-")[1] + "/" + lang;
            case "en-ie":
            case "en-gb":
                return "http://www.bestwaycorp.co.uk/?c=" + lang;
            case "et-ee":
            case "lt-lt":
            case "lv-lv":
                return "http://www.bestwaycorp.eu/?c=" + lang;
            default:
                return "http://www.bestwaycorp.com/?lg=en";
        }
    }
});
